{"version":3,"sources":["images/mesto-logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/api.js","components/App.js","index.js"],"names":["Header","className","src","logoPath","alt","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","i","likesAmount","length","cardDeleteButtonClassName","cardLikeButtonClassName","link","onClick","handleCardImage","name","type","onCardLike","onCardDelete","Main","mainCardImage","data","onOpenImage","onEditAvatar","avatar","aria-label","onEditProfile","about","onAddPlace","cards","map","item","Footer","PopupWithForm","isOpen","noValidate","onSubmit","title","children","id","aria-labelledby","button","onClose","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","htmlFor","placeholder","required","minLength","maxLength","value","onChange","target","useRef","onUpdateAvatar","current","ref","AddPlacePopup","ImagePopup","config","this","_url","url","_groupId","groupId","_headers","headers","Promise","all","getUserInfo","getCards","res","ok","json","reject","status","fetch","method","then","_checkResponse","body","JSON","stringify","cardId","_cardId","authorization","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","closeAllPopups","setCurrentUser","api","catch","err","console","log","setCards","Provider","changeLikeCardStatus","newCard","state","c","deleteCard","filter","changeUserInfo","postCard","setUserAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.13b0f349.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/mesto-logo.03b78ada.svg\";","import logoPath from \"../images/mesto-logo.svg\";\n\nexport default function Header() {\n  return (\n      <header className=\"header\">\n        <img className=\"header__logo\" src={logoPath} alt=\"Логотип 'Места'\" />\n      </header>\n  );\n}\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nexport default function Card(props) {\n  /* Image opening handler */\n  const handleImageClick = () => {\n    props.handleCardImage(props);\n  }\n\n  /* Subscribing on user context */\n  const currentUser = React.useContext(CurrentUserContext);\n\n  /* Checking if we are card owner */\n  const isOwn = props.card.owner._id === currentUser._id;\n\n  /* Checking which cards we liked */\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n\n  /* Likes counter */\n  const likesAmount = props.card.likes.length;\n\n  /* Trash button appearance handler */\n  const cardDeleteButtonClassName = (\n      `element__trash-button ${isOwn && 'element__trash-button_visible'}`\n  );\n\n  /* Like button appearance handler */\n  const cardLikeButtonClassName = (\n      `element__like-button ${isLiked && 'element__like-button_active'}`\n  );\n\n  /* Card delete handler */\n  const handleDeleteClick = () => {\n    props.onCardDelete(props.card);\n  }\n\n  /* Card like handler */\n  const handleLikeClick = () => {\n    props.onCardLike(props.card);\n  }\n\n  return (\n    <article className=\"element\" key={props.card._id}>\n      <img\n          className=\"element__image\"\n          src={props.card.link}\n          alt=\"Фотография места\"\n          onClick={handleImageClick}\n      />\n      <div className=\"element__info\">\n        <h2 className=\"element__place-name\">{props.card.name}</h2>\n        <div className=\"element__like-block\">\n          <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick} />\n          <p className=\"element__like-counter\">{likesAmount}</p>\n        </div>\n      </div>\n      <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick} />\n    </article>\n  )\n}\n\n/*<button type=\"button\" className=\"element__like-button\"></button>*/\n/*<button type=\"button\" className='element__trash-button'></button>*/\n","import React from \"react\";\nimport Card from \"./Card\"\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nexport default function Main(props) {\n  /* Image opening handler */\n  const mainCardImage = (data) => {\n    props.onOpenImage && props.onOpenImage(data);\n  }\n\n  /* Subscribing on user context */\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n      <main className=\"main\">\n        <section className=\"profile\">\n          <button className=\"profile__avatar-container\" onClick={props.onEditAvatar}>\n            <img className=\"profile__avatar\" alt=\"Фотография профиля\" src={currentUser.avatar} />\n          </button>\n          <div className=\"profile__info\">\n            <div className=\"profile__info-heading\">\n              <h1 className=\"profile__name\">{currentUser.name}</h1>\n              <button\n                  type=\"button\"\n                  className=\"profile__edit-button\"\n                  aria-label=\"Редактировать профиль\"\n                  onClick={props.onEditProfile}\n              />\n            </div>\n            <p className=\"profile__caption\">{currentUser.about}</p>\n          </div>\n          <button\n              type=\"button\"\n              className=\"profile__add-button\"\n              aria-label=\"Добавить карточку\"\n              onClick={props.onAddPlace}\n          />\n        </section>\n        <section className=\"elements\">\n          {props.cards.map((item) => (\n            <Card\n                card={item}\n                key={item._id}\n                handleCardImage={mainCardImage}\n                onCardLike={props.onCardLike}\n                onCardDelete={props.onCardDelete}\n            />\n          ))}\n        </section>\n      </main>\n  )\n}\n","export default function Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">© 2021 Mesto Russia</p>\n    </footer>\n  );\n}\n","export default function PopupWithForm(props) {\n  return (\n      <div className={`popup popup_${props.name} ${props.isOpen && 'popup_opened'}`}>\n        <form\n            className={`popup__container popup__container_${props.name} popup__form`}\n            name={props.name}\n            noValidate\n            onSubmit={props.onSubmit}\n        >\n          <h3 className={`popup__heading popup__heading_${props.name}`}>{props.title}</h3>\n          {props.children}\n          <button\n              type=\"submit\"\n              name=\"submit-button\"\n              className={`popup__submit-button popup__submit-button_${props.name} popup__button popup__button_enabled`}\n              id=\"popup__submit-button\"\n              aria-labelledby=\"popup__submit-button\">\n            {props.button}\n          </button>\n          <button\n              onClick={props.onClose}\n              type=\"button\"\n              name=\"close-button\"\n              className={`popup__close-icon popup__close-icon_${props.name}`}\n              aria-label=\"Закрыть форму редактирования профиля\">\n          </button>\n        </form>\n      </div>\n  )\n}\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nexport default function EditProfilePopup(props) {\n  /* Define states for profile name and description */\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  /* State handlers */\n  const handleChangeName = (e) => {\n    setName(e.target.value);\n  }\n  const handleChangeDescription = (e) => {\n    setDescription(e.target.value);\n  }\n\n  /* Context subscribing */\n  const currentUser = React.useContext(CurrentUserContext);\n\n  /* Setting context based states */\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  /* Submit handler */\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description\n    });\n  }\n\n  return (\n  <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      name=\"profile-edit\"\n      title=\"Редактировать профиль\"\n      button=\"Сохранить\"\n      onSubmit={handleSubmit}>\n    <label htmlFor=\"name-profile-edit\" className=\"popup__container-label\">\n      <input\n          type=\"text\"\n          name=\"name\"\n          className=\"popup__field popup__name popup__name_profile-edit popup__input\"\n          id=\"name-profile-edit\"\n          placeholder=\"Имя\"\n          aria-label=\"Имя профиля\"\n          required minLength=\"2\"\n          maxLength=\"40\"\n          value={name}\n          onChange={handleChangeName}\n      />\n      <span className=\"popup__error popup__error_visible name-profile-edit-error\" />\n    </label>\n    <label htmlFor=\"caption-profile-edit\" className=\"popup__container-label\">\n      <input\n          type=\"text\"\n          name=\"about\"\n          className=\"popup__field popup__caption popup__caption_profile-edit popup__input\"\n          id=\"caption-profile-edit\"\n          placeholder=\"Вид деятельности\"\n          aria-label=\"Описание профиля\"\n          required minLength=\"2\"\n          maxLength=\"200\"\n          value={description}\n          onChange={handleChangeDescription}\n      />\n      <span className=\"popup__error popup__error_visible caption-profile-edit-error\" />\n    </label>\n  </PopupWithForm>\n  )\n}\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nexport default function EditProfilePopup(props) {\n  /* Creating input reference */\n  const avatar = React.useRef();\n\n  /* Submit handler */\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar({\n      link: avatar.current.value\n    });\n    avatar.current.value = '';\n  }\n\n  return (\n      <PopupWithForm\n          isOpen={props.isOpen}\n          onClose={props.onClose}\n          name=\"user-image\"\n          title=\"Обновить аватар\"\n          button=\"Сохранить\"\n          onSubmit={handleSubmit}>\n        <label htmlFor=\"link-user-image\" className=\"popup__container-label\">\n          <input\n              type=\"url\"\n              name=\"link\"\n              className=\"popup__field popup__caption popup__caption_user-image popup__input\"\n              id=\"link-user-image\"\n              placeholder=\"Ссылка на картинку\"\n              aria-label=\"Ссылка на картинку\"\n              required minLength=\"1\"\n              ref={avatar}\n          />\n          <span className=\"popup__error popup__error_visible link-user-image-error\" />\n        </label>\n      </PopupWithForm>\n  )\n}\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nexport default function AddPlacePopup(props) {\n  /* Creating input references */\n  const name = React.useRef();\n  const link = React.useRef();\n\n  /* Submit handler */\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onAddPlace({name: name.current.value, link: link.current.value});\n    name.current.value = '';\n    link.current.value = '';\n  }\n\n  return (\n      <PopupWithForm\n          isOpen={props.isOpen}\n          onClose={props.onClose}\n          onSubmit={handleSubmit}\n          name=\"add-place\"\n          title=\"Новое место\"\n          button=\"Создать\">\n        <label htmlFor=\"name-add-place\" className=\"popup__container-label\">\n          <input\n              type=\"text\"\n              name=\"name\"\n              className=\"popup__field popup__name popup__name_add-place popup__input\"\n              id=\"name-add-place\"\n              placeholder=\"Название\"\n              aria-label=\"Название\"\n              required minLength=\"2\"\n              maxLength=\"30\"\n              ref={name} />\n          <span className=\"popup__error popup__error_visible name-add-place-error\" />\n        </label>\n        <label htmlFor=\"caption-add-place\" className=\"popup__container-label\">\n          <input\n              type=\"url\"\n              name=\"link\"\n              className=\"popup__field popup__caption popup__caption_add-place popup__input\"\n              id=\"caption-add-place\"\n              placeholder=\"Ссылка на картинку\"\n              aria-label=\"Ссылка на картинку\"\n              required minLength=\"1\"\n              ref={link} />\n          <span className=\"popup__error popup__error_visible caption-add-place-error\" />\n        </label>\n      </PopupWithForm>\n  )\n}\n","export default function ImagePopup(props) {\n  return (\n      <div className={`popup popup_image ${props.link && 'popup_opened'}`}>\n        <div className=\"popup__container popup__container_image\">\n          <img className=\"popup__image\" src={props.link} alt=\"Фотография места\" />\n          <p className=\"popup__image-caption\">{props.name}</p>\n          <button\n              onClick={props.onClose}\n              type=\"button\"\n              name=\"close-button\"\n              className=\"popup__close-icon popup__close-icon_image\"\n              aria-label=\"Закрыть картинку\"\n          ></button>\n        </div>\n      </div>\n  )\n}\n","class Api {\n  constructor(config) {\n    this._url = config.url;\n    this._groupId = config.groupId;\n    this._headers = config.headers;\n  }\n\n\n  /* C A R D S   R E Q U E S T S */\n\n  _getAllInfo() {\n    return Promise.all([this.getUserInfo(), this.getCards()]);\n  };\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка ${res.status}`);\n  }\n\n  getCards() {\n    return fetch(`${this._url}/${this._groupId}/cards`, {\n      method: \"GET\",\n      headers: this._headers\n    })\n      .then(this._checkResponse);\n  }\n\n  postCard(data) {\n    return fetch(`${this._url}/${this._groupId}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    })\n      .then(this._checkResponse);\n  }\n\n  deleteCard(cardId) {\n    this._cardId = cardId;\n      return fetch(`${this._url}/${this._groupId}/cards/${this._cardId}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    })\n      .then(this._checkResponse);\n  }\n\n\n  /* U S E R   R E Q U E S T S */\n  /* Info */\n  getUserInfo() {\n    return fetch(`${this._url}/${this._groupId}/users/me`, {\n      method: \"GET\",\n      headers: this._headers\n    })\n      .then(this._checkResponse);\n  }\n\n  changeUserInfo(data) {\n    return fetch(`${this._url}/${this._groupId}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n      .then(this._checkResponse);\n    }\n\n  /* Avatar */\n  setUserAvatar(data) {\n    return fetch(`${this._url}/${this._groupId}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: data.link\n      })\n    })\n      .then(this._checkResponse);\n  }\n\n\n  /* L I K E   R E Q U E S T S */\n\n  changeLikeCardStatus(id, status) {\n    return fetch(`${this._url}/${this._groupId}/cards/likes/${id}`, {\n      method: status ? \"PUT\" : \"DELETE\",\n      headers: this._headers\n    })\n        .then(this._checkResponse);\n  }\n}\n\nexport default new Api({\n  url: 'https://mesto.nomoreparties.co/v1',\n  groupId: 'cohort-20',\n  headers: {\n    authorization: '9af7eabd-c94e-4285-ad12-d82268efba7b',\n    'Content-Type': 'application/json'\n  }\n});\n","import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nexport default function App() {\n  /* EditProfilePopup handling */\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  /* AddPlacePopup handling */\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  /* EditAvatarPopup handling */\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  /* ImagePopup handling */\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const handleCardClick = (data) => {\n    setSelectedCard({name: data.card.name, link: data.card.link});\n  }\n\n  /* Close all popups */\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard({});\n  }\n\n  /* User setting functionality */\n  let [currentUser, setCurrentUser] = React.useState('');\n\n  React.useEffect(() => {\n    api.getUserInfo()\n        .then((res) => {\n          setCurrentUser(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n  }, [])\n\n  const handleUpdateUser = ({name, about}) => {\n    api.changeUserInfo({name, about})\n        .then((res) => {\n          setCurrentUser(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    closeAllPopups();\n  }\n\n  const handleUpdateAvatar = ({link}) => {\n    api.setUserAvatar({link})\n        .then((res) => {\n          setCurrentUser(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    closeAllPopups();\n  }\n\n  /* Card functionality */\n  let [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api.getCards()\n        .then((res) => {\n          setCards(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n  }, [])\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n      setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n    });\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id).then(() => {\n      setCards((state) => state.filter((c) => c._id !== card._id));\n    });\n  }\n\n  /* AddPlace functionality */\n  function handleAddPlaceSubmit(data) {\n    api.postCard(data).then((newCard) => {\n      setCards([newCard, ...cards]);\n    });\n    closeAllPopups();\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n      <div className='page__content'>\n        <div className=\"page\">\n          <Header />\n          <Main\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              onOpenImage={handleCardClick}\n              cards={cards}\n              onCardLike={handleCardLike}\n              onCardDelete={handleCardDelete} />\n          <Footer />\n          <EditProfilePopup\n              isOpen={isEditProfilePopupOpen}\n              onClose={closeAllPopups}\n              onUpdateUser={handleUpdateUser} />\n          <AddPlacePopup\n              isOpen={isAddPlacePopupOpen}\n              onClose={closeAllPopups}\n              onAddPlace={handleAddPlaceSubmit} />\n          <EditAvatarPopup\n              isOpen={isEditAvatarPopupOpen}\n              onClose={closeAllPopups}\n              onUpdateAvatar={handleUpdateAvatar} />\n          <ImagePopup\n              isOpen={selectedCard}\n              onClose={closeAllPopups}\n              name={selectedCard.name}\n              link={selectedCard.link} />\n        </div>\n      </div>\n    </div>\n    </CurrentUserContext.Provider>\n  )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}